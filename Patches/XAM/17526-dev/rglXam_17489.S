# ============================================================================
#                            RGLoader Xam Patches  (.RGLP file)
#      
# ============================================================================
 
.include "..\\..\\macros.S"
 
# ============================================================================
#	XboxKrnlVersion
#       set to 17349
# ============================================================================
	MAKEPATCH 0x80040460
0:
	.short 17526
	.short 0
9:
	MAKEPATCH 0x80040468
0:
	.short 1888
	.short 0
9:



# ============================================================================
#       MmAllocateImageMemory
#       get rid of heap crash errors
# ============================================================================
        MAKEPATCH 0x81D23350
0:
        .long 0x00000000
9:
	MAKEPATCH 0x800AF5CC
0:
	nop
9:
	MAKEPATCH 0x8009FE50
0:
	nop
9:

 
# ============================================================================
#       ProfileEmbeddedContent::Validate
#       remove sig check
# ============================================================================
        MAKEPATCH 0x81B4885C
0:
        nop
9:
        MAKEPATCH 0x81B48870
0:
        nop
9:
 
# ============================================================================
#       XContent::ContentOpenPackageFile
#       ignore hash check
# ============================================================================
	MAKEPATCH 0x81734204
0:
	b         0x14
9:
	MAKEPATCH 0x81733ACC
0:
	b         -0xFC
9:
 
 
# ============================================================================
#       XContent::ContentMountPackage
#       ignore hash check
# ============================================================================
        MAKEPATCH 0x817342F4
0:
        b  0x14
9:
 
# ============================================================================
#       XContent::OpenWorker
#  ignore license check
# ============================================================================
        MAKEPATCH 0x81736820
0:
        nop
9:


 
 
# ============================================================================
#       XMsgStartIORequestEx
#       get rid of annoying dbgprint about missing sysdlls
# ============================================================================
#        MAKEPATCH 0x81761700
#0:
#        li  %r3, 0
#9:

# ============================================================================
#       Media extended authentication
#       fix dvd drives for jtags
# ============================================================================
        MAKEPATCH 0x8175C8EC
0:
        b   0x10
9:


# ============================================================================
#       CXNetLogonTask::GetNatType
#       patch out exception in NAT type
# ============================================================================
        MAKEPATCH 0x81820E4C
0:
        nop
		#lis       %r3, -0x7FEB # 0x8015190E
		#ori       %r3, %r3, 0x190E
9:
        MAKEPATCH 0x81820E78
0:
        nop
9:
        MAKEPATCH 0x81821120
0:
        nop
		#lis       %r3, -0x7FEB # 0x8015190E
		#ori       %r3, %r3, 0x190E
9:

# ============================================================================
#       XMsgInProcessCall
#       get rid of annoying dbgprint about missing sysdlls
# ============================================================================
#        MAKEPATCH 0x817617C0
#0:
#        li  %r3, 0
#9:
       
 
# ============================================================================
#       XMsgSystemProcessCall
#       get rid of annoying dbgprint about missing sysdlls
# ============================================================================
#        MAKEPATCH 0x81761938
#0:
 #       li  %r3, 0
#9:
 
 
# ============================================================================
#       CDvdDrive::Authenticate
#       fix retail xex check for jtags
# ============================================================================
        MAKEPATCH 0x8176D338
0:
        li  %r3, 0
        blr
9:

# ============================================================================
# XContentGetLicenseMask - patches xam to think all arcade are full at runtime
# ============================================================================
#	MAKEPATCH 0x817C11B8   //17349
#0:
#	li		%r11, -1
#	stw		%r11, 0(%r3)
#	li		%r3, 0
#	blr
#9:


MAKEPATCH 0x817BE358 
0:
        nop
9:

MAKEPATCH 0x817BE394
0:
        .long 0x48000048
9:

MAKEPATCH 0x81823314
0:
        .long 0x39604476
9:

# ============================================================================
        .long 0xffffffff   # END OF PATCHES
# ============================================================================
